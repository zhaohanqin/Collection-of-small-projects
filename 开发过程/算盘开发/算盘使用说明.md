# 改进的中国算盘模拟器使用说明

## 概述

这是一个基于PySide6开发的中国算盘模拟器，修复了原有算盘程序中的交互问题，提供了更加直观和符合真实算盘操作的用户体验。

## 主要改进

### 相比原有算盘程序的改进

1. **简化的珠子交互逻辑**
   - 上珠：直接点击切换激活/非激活状态
   - 下珠：智能移动，点击任意珠子自动设置正确的激活数量

2. **更好的视觉效果**
   - 圆形珠子设计，更符合真实算盘
   - 渐变色彩和高光效果
   - 鼠标悬停高亮显示
   - 清晰的激活/非激活状态区分

3. **优化的用户界面**
   - 现代化的PySide6界面设计
   - 合理的布局和间距
   - 清晰的按钮和输入框样式
   - 实时数值显示

4. **增强的功能**
   - 支持13档，可处理万亿级别数值
   - 完善的错误处理和边界检查
   - 数值溢出警告
   - 计算结果验证

## 使用方法

### 基本操作

#### 1. 珠子移动

- **上珠（代表5）**：
  - 点击上珠可以在激活（靠近梁）和非激活（远离梁）之间切换
  - 激活时显示为橙棕色，非激活时显示为浅棕色

- **下珠（每颗代表1）**：
  - 点击任意下珠，该珠子及其上方所有珠子都会移动到激活位置
  - 点击已激活的珠子，该珠子及其下方所有激活珠子都会移动到非激活位置
  - 这样可以快速设置0-4的任意数值

#### 2. 数字设置

- 在"设置数字"输入框中输入数字
- 点击"设置"按钮或按回车键
- 算盘会自动设置相应的珠子状态

#### 3. 清空算盘

- 点击"清空"按钮
- 所有珠子回到非激活状态
- 数值显示为0

#### 4. 数学计算

- 当前算盘数值作为第一个操作数
- 选择运算符（+、-、×、÷）
- 输入第二个操作数
- 点击"计算"按钮或按回车键
- 结果会自动设置到算盘上

### 高级功能

#### 1. 悬停效果

- 将鼠标悬停在珠子上会显示金色高亮
- 帮助用户准确定位要操作的珠子

#### 2. 数值范围

- 支持0到9,999,999,999,999（13位数字）
- 超出范围的数值会被自动限制
- 负数会被设置为0

#### 3. 错误处理

- 无效输入会显示错误提示
- 除零操作会被阻止
- 数值溢出会显示警告

## 算盘结构

### 档位说明

从左到右依次为：

- 万亿位、千亿位、百亿位、十亿位、亿位
- 千万位、百万位、十万位、万位
- 千位、百位、十位、个位

### 珠子配置

- **每档1颗上珠**：代表5
- **每档4颗下珠**：每颗代表1
- **总计每档可表示0-9的数值**

## 技术特性

### 开发环境

- Python 3.x
- PySide6 GUI框架
- 面向对象设计

### 性能优化

- 高效的绘制算法
- 智能的重绘机制
- 流畅的交互响应

### 代码结构

- `AbacusWidget`：算盘核心部件
- `AbacusApp`：主应用程序窗口
- 模块化设计，易于维护和扩展

## 故障排除

### 常见问题

1. **程序无法启动**
   - 确保已安装PySide6：`pip install PySide6`
   - 检查Python版本是否为3.x

2. **珠子点击无响应**
   - 确保点击在珠子区域内
   - 尝试点击珠子中心位置

3. **数值显示异常**
   - 检查输入的数字是否在有效范围内
   - 尝试清空算盘后重新设置

4. **计算结果错误**
   - 确认操作数输入正确
   - 检查运算符选择是否正确

### 性能建议

1. **大数值操作**
   - 对于超大数值，建议分段处理
   - 注意数值溢出警告

2. **频繁操作**
   - 避免过快的连续点击
   - 等待界面更新完成后再进行下一步操作

## 开发者信息

本程序基于原有的算盘模拟器进行了全面改进，修复了交互问题，提升了用户体验。

### 主要改进点

1. 修复了珠子移动逻辑的复杂性问题
2. 改善了点击检测的准确性
3. 优化了视觉效果和用户界面
4. 增强了错误处理和边界检查
5. 提供了更符合真实算盘操作的交互方式

欢迎反馈使用中遇到的问题和改进建议！
