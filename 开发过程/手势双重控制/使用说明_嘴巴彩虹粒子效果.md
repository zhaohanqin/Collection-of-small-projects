# 嘴巴彩虹粒子效果 - 使用说明

## 🌈 功能特点

### 主要改进

1. **全嘴巴宽度粒子生成**: 粒子现在覆盖整个嘴巴宽度，而不是只从中心点生成
2. **纯净视图模式**: 提供无任何标记的纯净画面，只显示彩虹粒子效果
3. **智能粒子分布**: 根据嘴巴宽度自动调整粒子数量和分布

### 视觉效果

- **彩虹粒子**: 从嘴巴位置生成彩虹色粒子
- **物理模拟**: 粒子具有重力效果，会自然下落和堆积
- **边界保持**: 粒子不会掉出屏幕外
- **实时响应**: 张嘴即可生成粒子

## 🎮 操作控制

### 基本操作

- **张开嘴巴**: 生成彩虹粒子（覆盖整个嘴巴宽度）
- **闭合嘴巴**: 停止生成粒子

### 键盘控制

- **ESC键**: 退出程序
- **C键**: 清空所有粒子
- **V键**: 切换视图模式（纯净视图 ↔ 调试视图）

### 视图模式

1. **纯净视图** (默认)
   - 无任何人脸标记
   - 只显示摄像头画面和彩虹粒子
   - 左上角显示简单状态信息

2. **调试视图**
   - 显示人脸网格
   - 显示嘴巴检测标记
   - 显示详细的调试信息
   - 显示粒子生成点

## 🔧 技术参数

### 粒子生成

- **检测阈值**: 嘴巴张开程度 > 0.12
- **生成频率**: 每15毫秒
- **粒子数量**: 根据嘴巴宽度自动调整（最少5个）
- **颜色变化**: HSV色彩空间，每个粒子颜色递增3度

### 物理模拟

- **重力效果**: 粒子向下落
- **碰撞检测**: 支持左下、右下移动
- **边界处理**: 防止粒子掉出屏幕

## 🚀 运行方法

### 直接运行

```bash
python 嘴巴彩虹粒子效果.py
```

### 依赖要求

- pygame >= 2.0.0
- mediapipe >= 0.8.0
- opencv-python >= 4.5.0
- numpy >= 1.20.0

## 💡 使用技巧

### 最佳效果

1. **光线充足**: 确保面部光线良好
2. **正对摄像头**: 保持面部正对摄像头
3. **适当距离**: 保持适当的摄像头距离
4. **张嘴幅度**: 适度张开嘴巴即可触发

### 性能优化

- 如果运行卡顿，可以降低网格分辨率（修改COLS, ROWS）
- 关闭调试视图可以提高性能

## 🎨 视觉效果说明

### 粒子生成模式

- 检测到嘴巴张开时，在整个嘴巴宽度范围内生成粒子
- 粒子数量根据嘴巴宽度自动调整
- 粒子从嘴巴内部稍微偏移的位置生成，模拟从嘴里流出的效果

### 颜色系统

- 使用HSV颜色空间生成彩虹色
- 每个粒子的颜色都略有不同
- 颜色循环变化，创造连续的彩虹效果

## 🔍 故障排除

### 常见问题

1. **摄像头无法启动**
   - 检查摄像头是否被其他程序占用
   - 确认摄像头权限

2. **人脸检测不准确**
   - 改善光线条件
   - 调整摄像头角度
   - 保持面部清晰可见

3. **粒子生成不稳定**
   - 尝试调整嘴巴张开幅度
   - 确保面部稳定
   - 检查光线是否充足

### 性能问题

- 降低分辨率: 修改 WIDTH, HEIGHT
- 减少网格密度: 修改 COLS, ROWS
- 使用纯净视图模式

## 📝 更新日志

### v2.0 改进

- ✅ 粒子宽度覆盖整个嘴巴宽度
- ✅ 添加纯净视图模式
- ✅ 智能粒子数量调整
- ✅ 改进的用户界面
- ✅ 视图切换功能

### v1.0 基础功能

- ✅ 基本的嘴巴检测
- ✅ 彩虹粒子生成
- ✅ 物理模拟系统
- ✅ 边界保持功能
